(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"/zyf":function(e,t,n){"use strict";var a={name:"page",props:{pageSizeArray:Array,size:Number,pageTotal:Number,current:Number,nameShow:String},data:function(){return{pageCurrent:this.current}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)}},watch:{current:function(e){this.pageCurrent=e}}},i=(n("t2r+"),n("KHd+")),r=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"事件详情"===e.nameShow?"pageClass":"",staticStyle:{height:"20px","padding-top":"10px"}},[n("span",{staticStyle:{display:"inline-block","font-size":"13px","min-width":"35.5px",height:"28px","line-height":"30px","vertical-align":"top","box-sizing":"border-box",float:"right"}},[e._v("共"+e._s(e.pageTotal)+"条")]),e._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next","page-size":e.size,"current-page":e.pageCurrent,total:e.pageTotal},on:{"update:currentPage":function(t){e.pageCurrent=t},"update:current-page":function(t){e.pageCurrent=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)}),[],!1,null,"40b774d6",null);t.a=r.exports},FUKD:function(e,t,n){"use strict";n.r(t);var a={name:"formService",props:{isAdd:Boolean,codeList:Array},data:function(){return{form:{id:"",name:"",desc:"",substances:[],version:""},dialogVisible:!1,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}],substances:[{required:!0,message:"请选择插件",trigger:"change"}]}}},methods:{handleClose:function(){this.dialogVisible=!1,this.form={}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.isAdd?t.$request.fetchAddService(t.form).then((function(){t.$message({message:"添加成功!!!",type:"success"}),t.$parent.getService(),t.dialogVisible=!1,t.form={}})).catch((function(e){t.$message.error(e.data)})):t.$request.fetchUpdataService(t.form).then((function(){t.$message({message:"编辑成功!!!",type:"success"}),t.$parent.getService(),t.dialogVisible=!1,t.form={}})).catch((function(e){t.$message.error(e.data)})))}))}}},i=n("KHd+"),r=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"before-close":e.handleClose,"el-dialog":"","close-on-click-modal":!1,visible:e.dialogVisible,title:e.isAdd?"新增服务":"编辑服务","append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"95px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"desc"}},[n("el-input",{attrs:{type:"text"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"插件",prop:"substances"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.form.substances,callback:function(t){e.$set(e.form,"substances",t)},expression:"form.substances"}},e._l(e.codeList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.isAdd?"创建":"修改"))])],1)],1)}),[],!1,null,"47aef3b0",null).exports,s={name:"index",components:{Page:n("/zyf").a,EditForm:r},data:function(){return{current:1,size:10,pageTotal:0,pageSizeArray:["10","20","30","40"],serviceData:[],isAdd:!0,delLoading:!1,codeList:[],selectInput:""}},created:function(){this.getService(),this.getCodeList()},methods:{dateTime:function(e){return n("wd/R")(e).format("YYYY-MM-DD HH:mm:ss")},percentageChange:function(e,t){return 0===e?0:parseInt(e/t*1e4)/100},customColorMethod:function(e,t){var n=this.percentageChange(e,t);return n<30?"#67c23a":n<70?"#e6a23c":"#f56c6c"},handleSizeChange:function(e){this.size=e,this.get()},handleCurrentChange:function(e){this.current=e},getCodeList:function(){var e=this;this.$request.fetchGetLinks().then((function(t){e.codeList=t.data}))},addService:function(){this.isAdd=!0,this.$refs.forms.dialogVisible=!0},subDelete:function(e){var t=this;this.$refs[e].doClose();var n=this;n.delLoading=!0,this.$request.fetchDeleteService(e).then((function(e){n.$message({message:"删除成功!!!",type:"success"}),n.delLoading=!1})).catch((function(e){t.$message.error(e.data)}))},getService:function(){var e=this,t={current:this.current,size:this.size,name:this.selectInput};this.$request.fetchGetService(t).then((function(t){e.serviceData=t.data.records,e.pageTotal=t.data.total})).catch((function(t){e.$message.error(t.data)}))},handleEdit:function(e){this.isAdd=!1;var t,n=this.$refs.forms;t=e.substances.map((function(e){return e.id})),n.form={name:e.name,desc:e.desc,substances:t,id:e.id,version:e.version},n.dialogVisible=!0}}},o=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"20%"},attrs:{placeholder:"请输入搜索内容",size:"mini"},model:{value:e.selectInput,callback:function(t){e.selectInput=t},expression:"selectInput"}}),e._v(" "),n("el-button",{staticStyle:{color:"#909399",background:"#f4f4f5","border-color":"#d3d4d6"},attrs:{icon:"el-icon-search",size:"mini"},on:{click:e.getService}})],1),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("el-button",{staticStyle:{"margin-left":"0"},attrs:{"el-button":"",type:"success",plain:"",size:"mini"},on:{click:e.addService}},[e._v("添加\n        ")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.serviceData,border:"","header-cell-style":{color:"#909399",textAlign:"center",background:"#f5f7fa"}}},[e._v(">\n      "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.dateTime(t.row.created_at))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.dateTime(t.row.updated_at))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-popover",{ref:t.row.id,attrs:{placement:"top",width:"200"}},[n("p",[e._v("确定删除?")]),e._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){e.$refs[t.row.id].doClose()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(n){return e.subDelete(t.row.id)}}},[e._v("确定\n              ")])],1),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("Page",{attrs:{size:e.size,current:e.current,pageTotal:e.pageTotal,pageSizeArray:e.pageSizeArray},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),e._v(" "),n("EditForm",{ref:"forms",attrs:{"is-add":e.isAdd,codeList:e.codeList}})],1)}),[],!1,null,"88888b34",null);t.default=o.exports},TzQq:function(e,t,n){},"t2r+":function(e,t,n){"use strict";n("TzQq")}}]);
//# sourceMappingURL=40.4b18917a6c6c83667e26.js.map