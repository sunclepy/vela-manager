(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"+r5Y":function(t,e,o){"use strict";o.r(e);var n={name:"formRoom",data:function(){return{roomShow:!1,isAdd:!0,lanText:"",vipText:"",form:{name:"",bind:"",servername:"",lan:[],vip:[]}}},methods:{addRoom:function(t){var e=this;this.$refs[t].validate((function(t){t&&(""!==e.lanText&&(e.form.lan=e.lanText.split("\n")),""!==e.vipText&&(e.form.vip=e.vipText.split("\n")),e.$request.fetchAddRooms(e.form).then((function(){e.$message({message:"添加成功!!!",type:"success"}),e.$emit("getRooms"),e.roomShow=!1,e.form={name:"",bind:"",servername:"",lan:[],vip:[]}})).catch((function(t){e.$message.error(t.data)})))}))}}},a=o("KHd+"),r=Object(a.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{visible:t.roomShow,title:!0===t.isAdd?"添加链接":"编辑链接",width:"30%"},on:{"update:visible":function(e){t.roomShow=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"95px"}},[o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"bind"}},[o("el-input",{attrs:{size:"small"},model:{value:t.form.bind,callback:function(e){t.$set(t.form,"bind",e)},expression:"form.bind"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"servername"}},[o("el-input",{attrs:{size:"small"},model:{value:t.form.servername,callback:function(e){t.$set(t.form,"servername",e)},expression:"form.servername"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"lan"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.lanText,callback:function(e){t.lanText=e},expression:"lanText"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"vip"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.vipText,callback:function(e){t.vipText=e},expression:"vipText"}})],1)],1),t._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addRoom("form")}}},[t._v("提交")])],1)],1)}),[],!1,null,"2e540fe4",null).exports,s=(o("vQJo"),{name:"index",components:{RoomForm:r},data:function(){return{delLoading:!1,roomData:[]}},mounted:function(){this.getRooms()},methods:{getRooms:function(){var t=this;this.$request.fetchGetRooms().then((function(e){t.roomData=e.data.records}))},addRoom:function(){var t=this.$refs.room;t.roomShow=!0,t.isAdd=!0},editRoom:function(t){var e=this.$refs.room;e.roomShow=!0,e.form=t,e.isAdd=!1},delCode:function(t){var e=this;this.$request.fetchDelRoom(t.name).then((function(){e.$refs[t.id].doClose(),e.$message({message:"删除成功!!!",type:"success"}),e.getRooms()}))},addRelation:function(){this.$refs.room.roomShow=!0}}}),l=(o("Q2Hv"),Object(a.a)(s,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"box-card"},[o("el-row",[o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[o("el-button",{staticStyle:{"margin-left":"0"},attrs:{"el-button":"",type:"success",plain:"",size:"mini"},on:{click:t.addRelation}},[t._v("添加\n      ")])],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:t.roomData,border:"","header-cell-style":{color:"#909399",textAlign:"center",background:"#f5f7fa"}}},[o("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:!0===e.row.status?"success":"danger",size:"mini"}},[t._v("\n          "+t._s(!0===e.row.status?"在线":"离线")+"\n        ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"名称",width:"175"}}),t._v(" "),o("el-table-column",{attrs:{label:"端点"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticStyle:{width:"95%",margin:"0 auto","text-align":"left"}},[o("p",[t._v(" vip:\n            "),t._l(e.row.vip,(function(e,n){return o("el-tag",{key:n,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2),t._v(" "),o("p",[t._v(" lan:\n            "),t._l(e.row.lan,(function(e,n){return o("el-tag",{key:n,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2)])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"servername",label:"服务名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"updated_at",label:"最后一次心跳时间",width:"175"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("date")(e.row.updated_at,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])})],1),t._v(" "),o("RoomForm",{ref:"room",on:{getRooms:t.getRooms}})],1)}),[],!1,null,"3a45611b",null));e.default=l.exports},Q2Hv:function(t,e,o){"use strict";o("TM+5")},"TM+5":function(t,e,o){},vQJo:function(t,e,o){"use strict";o("oCYn").default.filter("date",(function(t,e){var o=new Date(t),n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp(`(${a})`).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}))}}]);
//# sourceMappingURL=42.5ae8c5ea0d5429b8b545.js.map